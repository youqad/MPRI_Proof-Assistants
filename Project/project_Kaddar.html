<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>project_Kaddar</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library project_Kaddar</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">A decision procedure for intuitionistic propositional tautologies</h1>

<div class="paragraph"> </div>

<a name="lab2"></a><h3 class="section">Proof Assistants - Younesse Kaddar</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Prelude.html#"><span class="id" title="library">Prelude</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Program.Program.html#"><span class="id" title="library">Program</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.omega.Omega.html#"><span class="id" title="library">Omega</span></a>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 8 (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#8f9364556521ebb498093f28eea2240f"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#8f9364556521ebb498093f28eea2240f"><span class="id" title="notation">:&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) ⇒ <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 8 (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#9b077c369e19739ef880736ba34623ff"><span class="id" title="notation">≤</span></a> <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 8 (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 8 (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#bf4ebde00e5e9b74eb68426b182981ab"><span class="id" title="notation">≠</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#bf4ebde00e5e9b74eb68426b182981ab"><span class="id" title="notation">:&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) ⇒ <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 8 (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#9b077c369e19739ef880736ba34623ff"><span class="id" title="notation">≤</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a>) ⇒ <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 8 (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a>) ⇒ <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 12 ⇒ <span class="id" title="var">exfalso</span>; <span class="id" title="var">lia</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab3"></a><h1 class="section">2. Implementing the decision procedure</h1>

<div class="paragraph"> </div>

<a name="lab4"></a><h1 class="section">2.2 Building the tactic</h1>

<div class="paragraph"> </div>

<a name="lab5"></a><h2 class="section">1. Write a tactic <span class="inlinecode"><span class="id" title="var">tauto1</span></span> that searches for a derivation (where propositions are expressed using Coq's standard connectives).</h2>

<a name="lab6"></a><h3 class="section">The tactic shall leave a trace of all rules applied (axiom rules may be omitted). It is also recommended to print the search depth in order to figure out how the tactic backtracks.</h3>

<div class="paragraph"> </div>

 Here is <span class="inlinecode"><span class="id" title="var">tauto1</span></span>: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">tauto1_aux</span> <span class="id" title="var">n</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> : ?<span class="id" title="var">A</span>    |- ?<span class="id" title="var">A</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] Axiom on " <span class="id" title="var">A</span>; <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> |- ?<span class="id" title="var">A</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ⊥-E on " <span class="id" title="var">A</span>; <span class="id" title="var">contradiction</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ⊤-I on ⊤"; <span class="id" title="tactic">constructor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> ?<span class="id" title="var">B</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ⇒-I on " <span class="id" title="var">A</span> " ⇒ " <span class="id" title="var">B</span>; <span class="id" title="tactic">intro</span>; <span class="id" title="var">tauto1_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> ?<span class="id" title="var">B</span>  |- ?<span class="id" title="var">C</span> ⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">HA</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ⇒-E on " <span class="id" title="var">C</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> <span class="id" title="var">A</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">intro</span> <span class="id" title="var">HA</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HA</span> | ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">tauto1_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> ?<span class="id" title="var">B</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∧-I on " <span class="id" title="var">A</span> " ∧ " <span class="id" title="var">B</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="var">tauto1_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) | <span class="id" title="var">tauto1_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> ?<span class="id" title="var">B</span>  |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∧-E on " <span class="id" title="var">A</span> " ∧ " <span class="id" title="var">B</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]; <span class="id" title="var">tauto1_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> ?<span class="id" title="var">B</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∨-I₁ on " <span class="id" title="var">A</span> " ∨ " <span class="id" title="var">B</span>; <span class="id" title="tactic">left</span>; <span class="id" title="var">tauto1_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> ?<span class="id" title="var">B</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∨-I₂ on " <span class="id" title="var">A</span> " ∨ " <span class="id" title="var">B</span>; <span class="id" title="tactic">right</span>; <span class="id" title="var">tauto1_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> ?<span class="id" title="var">B</span>  |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∨-E on " <span class="id" title="var">A</span> " ∨ " <span class="id" title="var">B</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="var">tauto1_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] Backtrack"; <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">tauto1</span> := <span class="id" title="var">tauto1_aux</span> 0.<br/>

<br/>
</div>

<div class="doc">
<a name="lab7"></a><h2 class="section">2. Try the tactic on examples of tautologies.</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="Examples_tauto1"><span class="id" title="section">Examples_tauto1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> <a name="Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a name="Examples_tauto1.B"><span class="id" title="variable">B</span></a> <a name="Examples_tauto1.C"><span class="id" title="variable">C</span></a> : <span class="id" title="keyword">Prop</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex1"><span class="id" title="definition">tauto1_ex1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
Output:

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ⇒-I on  ⊥  ⇒  A
[Depth:  1 ] ⊥-E on  A
tauto1_ex1 is defined
</pre>

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex2"><span class="id" title="definition">tauto1_ex2</span></a> : <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex3"><span class="id" title="definition">tauto1_ex3</span></a> : <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex4"><span class="id" title="definition">tauto1_ex4</span></a> : <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex5"><span class="id" title="definition">tauto1_ex5</span></a> : <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex6"><span class="id" title="definition">tauto1_ex6</span></a> : <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex7"><span class="id" title="definition">tauto1_ex7</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex8"><span class="id" title="definition">tauto1_ex8</span></a> : <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex9"><span class="id" title="definition">tauto1_ex9</span></a> : <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_ex10"><span class="id" title="definition">tauto1_ex10</span></a> : <a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto1.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto1.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto1.C"><span class="id" title="variable">C</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="project_Kaddar.html#Examples_tauto1"><span class="id" title="section">Examples_tauto1</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab8"></a><h1 class="section">2.3 Backtrack control</h1>

<div class="paragraph"> </div>

<a name="lab9"></a><h2 class="section">1. Write a tactic <span class="inlinecode"><span class="id" title="var">tauto2</span></span> that improves <span class="inlinecode"><span class="id" title="var">tauto1</span></span> by disabling the backtracking when a reversible rule is applied.</h2>

<a name="lab10"></a><h3 class="section">Hint: use failure level.</h3>

<div class="paragraph"> </div>

 The reversible rules are ⇒-I, ∧-I, ∧-E and ∨-E. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">tauto2_aux</span> <span class="id" title="var">n</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> : ?<span class="id" title="var">A</span>    |- ?<span class="id" title="var">A</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] Axiom on " <span class="id" title="var">A</span>; <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> |- ?<span class="id" title="var">A</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ⊥-E on " <span class="id" title="var">A</span>; <span class="id" title="var">contradiction</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ⊤-I on ⊤"; <span class="id" title="tactic">constructor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> ?<span class="id" title="var">B</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ⇒-I on " <span class="id" title="var">A</span> " ⇒ " <span class="id" title="var">B</span>; <span class="id" title="tactic">intro</span>; (<span class="id" title="var">tauto2_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) + <span class="id" title="tactic">fail</span> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> ?<span class="id" title="var">B</span>  |- ?<span class="id" title="var">C</span> ⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">HA</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ⇒-E on " <span class="id" title="var">C</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> <span class="id" title="var">A</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">intro</span> <span class="id" title="var">HA</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HA</span> | ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">tauto2_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> ?<span class="id" title="var">B</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∧-I on " <span class="id" title="var">A</span> " ∧ " <span class="id" title="var">B</span>; <span class="id" title="tactic">split</span>; (<span class="id" title="var">tauto2_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) + <span class="id" title="tactic">fail</span> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> ?<span class="id" title="var">B</span>  |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∧-E on " <span class="id" title="var">A</span> " ∧ " <span class="id" title="var">B</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]; (<span class="id" title="var">tauto2_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) + <span class="id" title="tactic">fail</span> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> ?<span class="id" title="var">B</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∨-I₁ on " <span class="id" title="var">A</span> " ∨ " <span class="id" title="var">B</span>; <span class="id" title="tactic">left</span>; <span class="id" title="var">tauto2_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   |- ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> ?<span class="id" title="var">B</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∨-I₂ on " <span class="id" title="var">A</span> " ∨ " <span class="id" title="var">B</span>; <span class="id" title="tactic">right</span>; <span class="id" title="var">tauto2_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : ?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> ?<span class="id" title="var">B</span>  |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] ∨-E on " <span class="id" title="var">A</span> " ∨ " <span class="id" title="var">B</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; (<span class="id" title="var">tauto2_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) + <span class="id" title="tactic">fail</span> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span> "[Depth: " <span class="id" title="var">n</span> "] Backtrack"; <span class="id" title="tactic">fail</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">tauto2</span> := <span class="id" title="var">tauto2_aux</span> 0.<br/>

<br/>
</div>

<div class="doc">
<a name="lab11"></a><h2 class="section">2. Give an example of lemma where we can see from the trace that the backtracking has been disabled on reversible rules.</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

Without backtrack control:

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="keyword">Example</span></span> <span class="inlinecode"><span class="id" title="var">tauto_ex3</span></span> <span class="inlinecode">:</span> <span class="inlinecode">(<span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">A</span>)</span> <span class="inlinecode">∨</span> <span class="inlinecode"><span class="id" title="var">True</span>.</span> <span class="inlinecode"><span class="id" title="keyword">Proof</span>.</span> <span class="inlinecode"><span class="id" title="var">tauto1</span>.</span> <span class="inlinecode"><span class="id" title="keyword">Qed</span>.</span>

<div class="paragraph"> </div>

yields

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  (A ∧ A)  ∨  ⊤
[Depth:  1 ] ∧-I on  A  ∧  A
[Depth:  2 ] Backtrack
[Depth:  1 ] Backtrack
[Depth:  0 ] ∨-I₂ on  (A ∧ A)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
</pre>

<div class="paragraph"> </div>

which is to be expected: in the <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode"><span class="id" title="keyword">goal</span></span> of <span class="inlinecode"><span class="id" title="var">tauto1</span></span>, after failing in the left <span class="inlinecode"><span class="id" title="var">A</span></span> (which triggers the first "Backtrack"), 
<span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">A</span></span> fails as well, and Coq continues to test the other patterns of the <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode"><span class="id" title="keyword">goal</span></span> for <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">A</span></span>,  
up until it reaches the last <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode">&quot;[<span class="id" title="var">Depth</span>:</span> <span class="inlinecode">&quot;</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">&quot;]</span> <span class="inlinecode"><span class="id" title="var">Backtrack</span>&quot;;</span> <span class="inlinecode"><span class="id" title="tactic">fail</span></span> and outputs "Backtrack". 

<div class="paragraph"> </div>

But with <span class="inlinecode"><span class="id" title="var">tauto2</span></span>: 

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="keyword">Example</span></span> <span class="inlinecode"><span class="id" title="var">tauto_ex3</span></span> <span class="inlinecode">:</span> <span class="inlinecode">(<span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">A</span>)</span> <span class="inlinecode">∨</span> <span class="inlinecode"><span class="id" title="var">True</span>.</span> <span class="inlinecode"><span class="id" title="keyword">Proof</span>.</span> <span class="inlinecode"><span class="id" title="var">tauto2</span>.</span> <span class="inlinecode"><span class="id" title="keyword">Qed</span>.</span>

<div class="paragraph"> </div>

yields 

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  (A ∧ A)  ∨  ⊤
[Depth:  1 ] ∧-I on  A  ∧  A
[Depth:  2 ] Backtrack
[Depth:  0 ] ∨-I₂ on  (A ∧ A)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
</pre>

<div class="paragraph"> </div>

Indeed, the first failure of the left <span class="inlinecode"><span class="id" title="var">A</span></span> outputs "Backtrack" (unavoidable), 
which in turn makes <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">A</span></span> fail: but this time, as the failure level is 1 and not 0, 
Coq doesn't test the other patterns and immediately stops the execution of the current <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode"><span class="id" title="keyword">goal</span></span>: 
hence no second "Backtrack"!

<div class="paragraph"> </div>

The key point is that in Ltac, if a recognized pattern fails with <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">0</span>, the subsequent patterns are still tested. 
Unless it fails with <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> where <span class="inlinecode"><span class="id" title="var">n</span></span>&gt;0, in which case the overall <span class="inlinecode"><span class="id" title="keyword">goal</span></span> <span class="inlinecode"><span class="id" title="keyword">match</span></span> execution is stopped, and <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">(<span class="id" title="var">n</span>-1)</span> is yielded.

<div class="paragraph"> </div>

So

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode"><span class="id" title="keyword">goal</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span>
        <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">0</span>
        <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode">&quot;<span class="id" title="var">Lalala</span>&quot;</span>

<div class="paragraph"> </div>

prints "Lalala", whereas

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode"><span class="id" title="keyword">goal</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span>
        <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">1</span>
        <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode">&quot;<span class="id" title="var">Lalala</span>&quot;</span>

<div class="paragraph"> </div>

doesn't print anything.

<div class="paragraph"> </div>

Here are some examples, to see that in action with <span class="inlinecode"><span class="id" title="var">tauto2</span></span>:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="Examples_tauto2"><span class="id" title="section">Examples_tauto2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> <a name="Examples_tauto2.A"><span class="id" title="variable">A</span></a> <a name="Examples_tauto2.B"><span class="id" title="variable">B</span></a> <a name="Examples_tauto2.C"><span class="id" title="variable">C</span></a> : <span class="id" title="keyword">Prop</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_and_I"><span class="id" title="definition">tauto1_and_I</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(((</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto2_and_I"><span class="id" title="definition">tauto2_and_I</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(((</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto2</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
∧-I reversible rule, output for <span class="inlinecode"><span class="id" title="var">tauto1</span></span>: 

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  ((((A ∧ A) ∧ A) ∧ A) ∧ A)  ∨  ⊤
[Depth:  1 ] ∧-I on  (((A ∧ A) ∧ A) ∧ A)  ∧  A
[Depth:  2 ] ∧-I on  ((A ∧ A) ∧ A)  ∧  A
[Depth:  3 ] ∧-I on  (A ∧ A)  ∧  A
[Depth:  4 ] ∧-I on  A  ∧  A
[Depth:  5 ] Backtrack
[Depth:  4 ] Backtrack
[Depth:  3 ] Backtrack
[Depth:  2 ] Backtrack
[Depth:  1 ] Backtrack
[Depth:  0 ] ∨-I₂ on  ((((A ∧ A) ∧ A) ∧ A) ∧ A)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
tauto1_and_I is defined
</pre>

<div class="paragraph"> </div>

vs. output for <span class="inlinecode"><span class="id" title="var">tauto2</span></span>:

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  ((((A ∧ A) ∧ A) ∧ A) ∧ A)  ∨  ⊤
[Depth:  1 ] ∧-I on  (((A ∧ A) ∧ A) ∧ A)  ∧  A
[Depth:  2 ] ∧-I on  ((A ∧ A) ∧ A)  ∧  A
[Depth:  3 ] ∧-I on  (A ∧ A)  ∧  A
[Depth:  4 ] ∧-I on  A  ∧  A
[Depth:  5 ] Backtrack
[Depth:  0 ] ∨-I₂ on  ((((A ∧ A) ∧ A) ∧ A) ∧ A)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
tauto2_and_I is defined
</pre>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_and_E"><span class="id" title="definition">tauto1_and_E</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> . <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto2_and_E"><span class="id" title="definition">tauto2_and_E</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto2</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
∧-E reversible rule, output for <span class="inlinecode"><span class="id" title="var">tauto1</span></span>:

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  (A ∧ A ⟶ B)  ∨  ⊤
[Depth:  1 ] ⇒-I on  (A ∧ A)  ⇒  B
[Depth:  2 ] ∧-E on  A  ∧  A
[Depth:  3 ] Backtrack
[Depth:  2 ] Backtrack
[Depth:  1 ] Backtrack
[Depth:  0 ] ∨-I₂ on  (A ∧ A ⟶ B)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
tauto1_and_E is defined
</pre>

<div class="paragraph"> </div>

vs. output for <span class="inlinecode"><span class="id" title="var">tauto2</span></span>:

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  (A ∧ A ⟶ B)  ∨  ⊤
[Depth:  1 ] ⇒-I on  (A ∧ A)  ⇒  B
[Depth:  2 ] ∧-E on  A  ∧  A
[Depth:  3 ] Backtrack
[Depth:  0 ] ∨-I₂ on  (A ∧ A ⟶ B)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
tauto2_and_E is defined
</pre>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_imp_I"><span class="id" title="definition">tauto1_imp_I</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto2_imp_I"><span class="id" title="definition">tauto2_imp_I</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto2</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
⇒-I reversible rule, output for <span class="inlinecode"><span class="id" title="var">tauto1</span></span>:

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  (A ⟶ B)  ∨  ⊤
[Depth:  1 ] ⇒-I on  A  ⇒  B
[Depth:  2 ] Backtrack
[Depth:  1 ] Backtrack
[Depth:  0 ] ∨-I₂ on  (A ⟶ B)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
tauto1_imp_I is defined
</pre>

<div class="paragraph"> </div>

vs. output for <span class="inlinecode"><span class="id" title="var">tauto2</span></span>:

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  (A ⟶ B)  ∨  ⊤
[Depth:  1 ] ⇒-I on  A  ⇒  B
[Depth:  2 ] Backtrack
[Depth:  0 ] ∨-I₂ on  (A ⟶ B)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
tauto2_imp_I is defined
</pre>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto1_or_E"><span class="id" title="definition">tauto1_or_E</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto1</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="tauto2_or_E"><span class="id" title="definition">tauto2_or_E</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#Examples_tauto2.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#Examples_tauto2.C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="var">tauto2</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
∨-E reversible rule, output for <span class="inlinecode"><span class="id" title="var">tauto1</span></span>:

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  (A ∨ B ⟶ C)  ∨  ⊤
[Depth:  1 ] ⇒-I on  (A ∨ B)  ⇒  C
[Depth:  2 ] ∨-E on  A  ∨  B
[Depth:  3 ] Backtrack
[Depth:  2 ] Backtrack
[Depth:  1 ] Backtrack
[Depth:  0 ] ∨-I₂ on  (A ∨ B ⟶ C)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
tauto1_or_E is defined
</pre>

<div class="paragraph"> </div>

vs. output for <span class="inlinecode"><span class="id" title="var">tauto2</span></span>:

<div class="paragraph"> </div>

<pre>
[Depth:  0 ] ∨-I₁ on  (A ∨ B ⟶ C)  ∨  ⊤
[Depth:  1 ] ⇒-I on  (A ∨ B)  ⇒  C
[Depth:  2 ] ∨-E on  A  ∨  B
[Depth:  3 ] Backtrack
[Depth:  0 ] ∨-I₂ on  (A ∨ B ⟶ C)  ∨  ⊤
[Depth:  1 ] ⊤-I on ⊤
tauto2_or_E is defined
</pre>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="project_Kaddar.html#Examples_tauto2"><span class="id" title="section">Examples_tauto2</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab12"></a><h1 class="section">3. Formalizing the tactic</h1>

<div class="paragraph"> </div>

<a name="lab13"></a><h1 class="section">3.1 Tactic steps</h1>

<div class="paragraph"> </div>

<a name="lab14"></a><h2 class="section">1. Write an inductive type <span class="inlinecode"><span class="id" title="var">form</span></span> representing the propositions, and a type <span class="inlinecode"><span class="id" title="var">seq</span></span> for the sequents.</h2>

<a name="lab15"></a><h3 class="section">Hint: use the lists of the standard library to represent the hypotheses of the sequent.</h3>

<div class="paragraph"> </div>

 Type of variables: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="Var"><span class="id" title="definition">Var</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="Var_eq_dec"><span class="id" title="definition">Var_eq_dec</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Arith.PeanoNat.html#Nat.eq_dec"><span class="id" title="lemma">Nat.eq_dec</span></a>.<br/>

<br/>
</div>

<div class="doc">
We could also resort to an abstract <span class="inlinecode"><span class="id" title="var">Var</span></span> type: 

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="keyword">Parameter</span></span> <span class="inlinecode"><span class="id" title="var">Var</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Set</span>.</span>

<div class="paragraph"> </div>

in which case, we would still need to state an axiom for decidable equality 
of variables:

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="var">Var_eq_dec</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode">(<span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">Var</span>),</span> <span class="inlinecode">{<span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span>}+{<span class="id" title="var">x</span></span> <span class="inlinecode">≠</span> <span class="inlinecode"><span class="id" title="var">y</span>}.</span>

<div class="paragraph"> </div>

But here, we will settle with <span class="inlinecode"><span class="id" title="var">Var</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">nat</span></span>, for the sake of simplicity and to provide 
explicit examples later. 
</div>
<div class="code">

<br/>
&nbsp;<span class="id" title="keyword">Inductive</span> <a name="form"><span class="id" title="inductive">form</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;| <a name="form_var"><span class="id" title="constructor">form_var</span></a> : <a class="idref" href="project_Kaddar.html#Var"><span class="id" title="definition">Var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a><br/>
&nbsp;&nbsp;| <a name="form_true"><span class="id" title="constructor">form_true</span></a> : <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a><br/>
&nbsp;&nbsp;| <a name="form_false"><span class="id" title="constructor">form_false</span></a> : <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a><br/>
&nbsp;&nbsp;| <a name="form_and"><span class="id" title="constructor">form_and</span></a> : <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a><br/>
&nbsp;&nbsp;| <a name="form_or"><span class="id" title="constructor">form_or</span></a> : <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a><br/>
&nbsp;&nbsp;| <a name="form_implies"><span class="id" title="constructor">form_implies</span></a> : <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a name="efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">&quot;</span></a>A ∧ B" := (<a class="idref" href="project_Kaddar.html#form_and"><span class="id" title="constructor">form_and</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a name="0def38e9465373df12920f2655265a68"><span class="id" title="notation">&quot;</span></a>A ∨ B" := (<a class="idref" href="project_Kaddar.html#form_or"><span class="id" title="constructor">form_or</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 35, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a name="9f5c3375f7d09e0ae3bd999b8cf6897e"><span class="id" title="notation">&quot;</span></a>A → B" := (<a class="idref" href="project_Kaddar.html#form_implies"><span class="id" title="constructor">form_implies</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 49, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="var">B</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Notation</span> <a name="bea38521e04ba10a34529a2ec1d696bc"><span class="id" title="notation">&quot;</span></a>⊤" := (<a class="idref" href="project_Kaddar.html#form_true"><span class="id" title="constructor">form_true</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 5).<br/>
<span class="id" title="keyword">Notation</span> <a name="bb4d87379c428696b2d63c8c5979a5b1"><span class="id" title="notation">&quot;</span></a>⊥" := (<a class="idref" href="project_Kaddar.html#form_false"><span class="id" title="constructor">form_false</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 5).<br/>
<span class="id" title="keyword">Notation</span> <a name="6d227b35fcc3fe7899272727b8c73bfc"><span class="id" title="notation">&quot;</span></a># x" := (<a class="idref" href="project_Kaddar.html#form_var"><span class="id" title="constructor">form_var</span></a> <span class="id" title="var">x</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="form_of_var"><span class="id" title="definition">form_of_var</span></a> := <span class="id" title="keyword">fun</span> (<span class="id" title="var">x</span>: <a class="idref" href="project_Kaddar.html#Var"><span class="id" title="definition">Var</span></a>) ⇒ <a class="idref" href="project_Kaddar.html#6d227b35fcc3fe7899272727b8c73bfc"><span class="id" title="notation">#</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="project_Kaddar.html#form_of_var"><span class="id" title="definition">form_of_var</span></a> <a class="idref" href="project_Kaddar.html#form_of_var"><span class="id" title="definition">:</span></a> <a class="idref" href="project_Kaddar.html#form_of_var"><span class="id" title="definition">Var</span></a> <a class="idref" href="project_Kaddar.html#form_of_var"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="project_Kaddar.html#form_of_var"><span class="id" title="definition">form</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="seq"><span class="id" title="inductive">seq</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="vdash"><span class="id" title="constructor">vdash</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a name="975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">&quot;</span></a>⊢" := <a class="idref" href="project_Kaddar.html#vdash"><span class="id" title="constructor">vdash</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 65).<br/>
<span class="id" title="keyword">Notation</span> <a name="cb7acbe1224adb543b81a19d84a15db4"><span class="id" title="notation">&quot;</span></a>∅ ⊢ A" := (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">A</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10).<br/>

<br/>
</div>

<div class="doc">
<a name="lab16"></a><h2 class="section">2. Write a function <span class="inlinecode"><span class="id" title="var">is_leaf</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">seq</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">bool</span></span> that recognizes when a sequent is an instance of one of the rules (Ax), (⊥−E) or (⊤−I).</h2>

<div class="paragraph"> </div>

 We first show that the <span class="inlinecode"><span class="id" title="var">In</span></span> predicate is decidable for <span class="inlinecode"><span class="id" title="var">form</span></span> lists (<span class="inlinecode"><span class="id" title="var">Var_in_dec</span></span>)... 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fact</span> <a name="form_eq_dec"><span class="id" title="lemma">form_eq_dec</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="project_Kaddar.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="project_Kaddar.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">apply</span> <a class="idref" href="project_Kaddar.html#Var_eq_dec"><span class="id" title="definition">Var_eq_dec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="form_in_dec"><span class="id" title="definition">form_in_dec</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">A</span>: <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>) (<span class="id" title="var">Δ</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="project_Kaddar.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="project_Kaddar.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <a class="idref" href="project_Kaddar.html#form_eq_dec"><span class="id" title="lemma">form_eq_dec</span></a>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Var_in_dec"><span class="id" title="definition">Var_in_dec</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">x</span>: <a class="idref" href="project_Kaddar.html#Var"><span class="id" title="definition">Var</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#Var"><span class="id" title="definition">Var</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <a class="idref" href="project_Kaddar.html#Var_eq_dec"><span class="id" title="definition">Var_eq_dec</span></a>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
... which enables us to straightforwardly define <span class="inlinecode"><span class="id" title="var">is_leaf</span></span>: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="is_leaf"><span class="id" title="definition">is_leaf</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="project_Kaddar.html#bea38521e04ba10a34529a2ec1d696bc"><span class="id" title="notation">⊤</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">A</span> ⇒  <span class="id" title="keyword">if</span> <a class="idref" href="project_Kaddar.html#form_in_dec"><span class="id" title="definition">form_in_dec</span></a> <a class="idref" href="project_Kaddar.html#bb4d87379c428696b2d63c8c5979a5b1"><span class="id" title="notation">⊥</span></a> <span class="id" title="var">Δ</span> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <a class="idref" href="project_Kaddar.html#form_in_dec"><span class="id" title="definition">form_in_dec</span></a> <span class="id" title="var">A</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="subgoals"><span class="id" title="definition">subgoals</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab17"></a><h2 class="section">3. Write a function <span class="inlinecode"><span class="id" title="var">step</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">seq</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="keyword">subgoals</span></span> implementing the rules with premisses (without backtrack control, i.e. <span class="inlinecode"><span class="id" title="var">tauto1</span></span>).</h2>

<a name="lab18"></a><h3 class="section">Hint: write a function <span class="inlinecode"><span class="id" title="var">pick_hyp</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">seq</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">list</span></span> <span class="inlinecode">(<span class="id" title="var">form</span></span> <span class="inlinecode">×</span> <span class="inlinecode"><span class="id" title="var">list</span></span> <span class="inlinecode"><span class="id" title="var">form</span>)</span> that produces all possible choices to pick an hypothesis</h3>

<div class="paragraph"> </div>

 The auxiliary function <span class="inlinecode"><span class="id" title="var">pick_hyp_aux</span></span> is such that 

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">pick_hyp_aux</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">(<span class="id" title="var">a_1</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">a_2</span></span> <span class="inlinecode">::</span> <span class="inlinecode">⋯</span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">a_n</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">nil</span>)</span> is the list 

<div class="paragraph"> </div>

    <span class="inlinecode"></span> <span class="inlinecode">[(<span class="id" title="var">a_1</span>,</span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">++</span> <span class="inlinecode">(<span class="id" title="var">a_2</span></span> <span class="inlinecode">::</span> <span class="inlinecode">⋯</span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">a_n</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">nil</span>));</span> <span class="inlinecode">(<span class="id" title="var">a_2</span>,</span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">++</span> <span class="inlinecode">(<span class="id" title="var">a_1</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">a_3</span></span> <span class="inlinecode">::</span> <span class="inlinecode">⋯</span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">a_n</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">nil</span>));</span> <span class="inlinecode">⋯</span> <span class="inlinecode">;</span> 
    <span class="inlinecode">(<span class="id" title="var">a_n</span>,</span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">++</span> <span class="inlinecode">(<span class="id" title="var">a_1</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">a_2</span></span> <span class="inlinecode">::</span> <span class="inlinecode">⋯</span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">a_</span>{<span class="id" title="var">n</span>-1}</span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">nil</span>))]</span> <span class="inlinecode"></span> 

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="pick_hyp_aux"><span class="id" title="definition">pick_hyp_aux</span></a> (<span class="id" title="var">l</span> <span class="id" title="var">l'</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">h</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#pick_hyp_aux"><span class="id" title="definition">pick_hyp_aux</span></a> (<a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a> <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a>) <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="pick_hyp"><span class="id" title="definition">pick_hyp</span></a> (<span class="id" title="var">s</span>: <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="project_Kaddar.html#pick_hyp_aux"><span class="id" title="definition">pick_hyp_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">Δ</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Variables</span> <a name="x"><span class="id" title="variable">x</span></a> <a name="y"><span class="id" title="variable">y</span></a> <a name="z"><span class="id" title="variable">z</span></a> <a name="t"><span class="id" title="variable">t</span></a> : <a class="idref" href="project_Kaddar.html#Var"><span class="id" title="definition">Var</span></a>.<br/>

<br/>
<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">compute</span> <span class="id" title="tactic">in</span> (<a class="idref" href="project_Kaddar.html#pick_hyp"><span class="id" title="definition">pick_hyp</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="axiom">x</span></a> <a class="idref" href="project_Kaddar.html#efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#y"><span class="id" title="axiom">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="project_Kaddar.html#y"><span class="id" title="axiom">y</span></a> <a class="idref" href="project_Kaddar.html#0def38e9465373df12920f2655265a68"><span class="id" title="notation">∨</span></a> <a class="idref" href="project_Kaddar.html#bea38521e04ba10a34529a2ec1d696bc"><span class="id" title="notation">⊤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="axiom">x</span></a> <a class="idref" href="project_Kaddar.html#9f5c3375f7d09e0ae3bd999b8cf6897e"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#bb4d87379c428696b2d63c8c5979a5b1"><span class="id" title="notation">⊥</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="project_Kaddar.html#bea38521e04ba10a34529a2ec1d696bc"><span class="id" title="notation">⊤</span></a>)).<br/>

<br/>
</div>

<div class="doc">
returns 

<div class="paragraph"> </div>

<pre>
[(# x ∧ # y, [# y ∨ ⊤; # x → ⊥]); (# y ∨ ⊤, [# x ∧ # y; # x → ⊥]);
    (# x → ⊥, [# x ∧ # y; # y ∨ ⊤])]
     : list (form * list form)
</pre>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="apply_elim_rules"><span class="id" title="definition">apply_elim_rules</span></a> (<span class="id" title="var">C</span> : <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>) (<span class="id" title="var">Γ</span> : <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="project_Kaddar.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|      <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#9f5c3375f7d09e0ae3bd999b8cf6897e"><span class="id" title="notation">→</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">Δ</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>    ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><span class="id" title="var">Δ</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="project_Kaddar.html#C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a><br/>
        |      <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">∧</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">Δ</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>    ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[[</span></a><span class="id" title="var">Δ</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="project_Kaddar.html#C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]]</span></a><br/>
        |      <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#0def38e9465373df12920f2655265a68"><span class="id" title="notation">∨</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">Δ</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>    ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><span class="id" title="var">Δ</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="project_Kaddar.html#C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <span class="id" title="var">Δ</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="project_Kaddar.html#C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a><br/>
        | <span class="id" title="var">_</span>                           ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="step"><span class="id" title="definition">step</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a>) : <a class="idref" href="project_Kaddar.html#subgoals"><span class="id" title="definition">subgoals</span></a> := <span class="id" title="keyword">let</span> '(<span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">C</span>) := <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">intro_rules</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">C</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|          <span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#9f5c3375f7d09e0ae3bd999b8cf6897e"><span class="id" title="notation">→</span></a> <span class="id" title="var">B</span>           ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[[</span></a><span class="id" title="var">Δ</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]]</span></a><br/>
            |          <span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">∧</span></a> <span class="id" title="var">B</span>           ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a><br/>
            |    <span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#0def38e9465373df12920f2655265a68"><span class="id" title="notation">∨</span></a> <span class="id" title="var">B</span>           ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a><br/>
            | <span class="id" title="var">_</span>                                 ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <a class="idref" href="project_Kaddar.html#intro_rules"><span class="id" title="variable">intro_rules</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#concat"><span class="id" title="definition">concat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="project_Kaddar.html#apply_elim_rules"><span class="id" title="definition">apply_elim_rules</span></a> <span class="id" title="var">C</span>) (<a class="idref" href="project_Kaddar.html#pick_hyp"><span class="id" title="definition">pick_hyp</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">compute</span> <span class="id" title="tactic">in</span> (<a class="idref" href="project_Kaddar.html#step"><span class="id" title="definition">step</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="project_Kaddar.html#x"><span class="id" title="axiom">x</span></a> <a class="idref" href="project_Kaddar.html#0def38e9465373df12920f2655265a68"><span class="id" title="notation">∨</span></a> <a class="idref" href="project_Kaddar.html#y"><span class="id" title="axiom">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="project_Kaddar.html#z"><span class="id" title="axiom">z</span></a> <a class="idref" href="project_Kaddar.html#9f5c3375f7d09e0ae3bd999b8cf6897e"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#t"><span class="id" title="axiom">t</span></a>)).<br/>

<br/>
</div>

<div class="doc">
returns 

<div class="paragraph"> </div>

<pre>
[[[# x ∨ # y; # z] ⊢ # t]; [[# x] ⊢ # z → # t; [# y] ⊢ # z → # t]]
    : subgoals
</pre>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a name="lab19"></a><h2 class="section">4. Write the decision procedure <span class="inlinecode"><span class="id" title="tactic">tauto</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">seq</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">bool</span></span>, that, given the max search depth and a sequent, returns <span class="inlinecode"><span class="id" title="var">true</span></span> if the sequent is valid (within the specified search depth).</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="tauto"><span class="id" title="definition">tauto</span></a> (<span class="id" title="var">max_depth</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">s</span>: <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="project_Kaddar.html#max_depth"><span class="id" title="variable">max_depth</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0     ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>   ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="project_Kaddar.html#is_leaf"><span class="id" title="definition">is_leaf</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="project_Kaddar.html#tauto"><span class="id" title="definition">tauto</span></a> <span class="id" title="var">n</span>)) (<a class="idref" href="project_Kaddar.html#step"><span class="id" title="definition">step</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab20"></a><h1 class="section">3.2 Termination</h1>

<div class="paragraph"> </div>

 A handful of tactic notations that will come in handy in the following proofs: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Tactic Notation</span> "int" <span class="id" title="var">tactic</span>(<span class="id" title="var">t</span>) := <span class="id" title="var">t</span>; <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "aut" <span class="id" title="var">tactic</span>(<span class="id" title="var">t</span>) := <span class="id" title="var">t</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "sint" <span class="id" title="var">tactic</span>(<span class="id" title="var">t</span>) := <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "sint_all" <span class="id" title="var">tactic</span>(<span class="id" title="var">t</span>) := <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *|-*; <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "saut" <span class="id" title="var">tactic</span>(<span class="id" title="var">t</span>) := <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "saut_all" <span class="id" title="var">tactic</span>(<span class="id" title="var">t</span>) := <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *|-*; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "s" <span class="id" title="var">tactic</span>(<span class="id" title="var">t</span>) := <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "s_all" <span class="id" title="var">tactic</span>(<span class="id" title="var">t</span>) := <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *|-*.<br/>

<br/>
</div>

<div class="doc">
<a name="lab21"></a><h2 class="section">1. Write the <span class="inlinecode"><span class="id" title="var">size</span></span> function.</h2>

<div class="paragraph"> </div>

 Size of a formula (<span class="inlinecode"><span class="id" title="var">size_form</span></span>): the number of connectives of this formula. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="size_form"><span class="id" title="definition">size_form</span></a> (φ : <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="project_Kaddar.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="project_Kaddar.html#6d227b35fcc3fe7899272727b8c73bfc"><span class="id" title="notation">#</span></a> <span class="id" title="var">_</span> | <a class="idref" href="project_Kaddar.html#bea38521e04ba10a34529a2ec1d696bc"><span class="id" title="notation">⊤</span></a> | <a class="idref" href="project_Kaddar.html#bb4d87379c428696b2d63c8c5979a5b1"><span class="id" title="notation">⊥</span></a> ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">∧</span></a> <span class="id" title="var">B</span> | <span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#0def38e9465373df12920f2655265a68"><span class="id" title="notation">∨</span></a> <span class="id" title="var">B</span> | <span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#9f5c3375f7d09e0ae3bd999b8cf6897e"><span class="id" title="notation">→</span></a> <span class="id" title="var">B</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="project_Kaddar.html#size_form"><span class="id" title="definition">size_form</span></a> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="project_Kaddar.html#size_form"><span class="id" title="definition">size_form</span></a> <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Size of a sequent (<span class="inlinecode"><span class="id" title="var">size</span></span>): the sum of the sizes of the context formulas 
and the conclusion one. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="sum"><span class="id" title="definition">sum</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add"><span class="id" title="definition">Nat.add</span></a> 0 <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="size"><span class="id" title="definition">size</span></a> (<span class="id" title="var">s</span>: <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <span class="id" title="keyword">let</span> '(<span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">A</span>) := <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="project_Kaddar.html#sum"><span class="id" title="definition">sum</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="project_Kaddar.html#size_form"><span class="id" title="definition">size_form</span></a> <span class="id" title="var">Δ</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="project_Kaddar.html#size_form"><span class="id" title="definition">size_form</span></a> <span class="id" title="var">A</span>.<br/>

<br/>
</div>

<div class="doc">
The following easy facts about <span class="inlinecode"><span class="id" title="var">sum</span></span> will be useful later. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fact</span> <a name="sum_fst"><span class="id" title="lemma">sum_fst</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">a</span>, <a class="idref" href="project_Kaddar.html#sum"><span class="id" title="definition">sum</span></a> (<a class="idref" href="project_Kaddar.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="project_Kaddar.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="project_Kaddar.html#sum"><span class="id" title="definition">sum</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">int</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a name="sum_app"><span class="id" title="lemma">sum_app</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>, <a class="idref" href="project_Kaddar.html#sum"><span class="id" title="definition">sum</span></a> (<a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="project_Kaddar.html#sum"><span class="id" title="definition">sum</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="project_Kaddar.html#sum"><span class="id" title="definition">sum</span></a> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">int</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="project_Kaddar.html#sum_fst"><span class="id" title="lemma">sum_fst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">int</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">map_app</span> <span class="id" title="var">sum_app</span> <span class="id" title="var">sum_fst</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab22"></a><h2 class="section">2. Prove that the <span class="inlinecode"><span class="id" title="var">step</span></span> function above produces sequents of size smaller than the input sequent.</h2>

<a name="lab23"></a><h3 class="section">Hint: use the <span class="inlinecode"><span class="id" title="tactic">omega</span></span> tactic (first <span class="inlinecode">[<span class="id" title="keyword">Require</span></span> <span class="inlinecode"><span class="id" title="keyword">Import</span></span> <span class="inlinecode"><span class="id" title="var">Omega</span>]</span>) to solve the arithmetic inequations.</h3>

<div class="paragraph"> </div>

 We first prove a few lemmas upon which the proof of <span class="inlinecode"><span class="id" title="var">size_decreasing</span></span> hinges:  

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">Forall_app</span></span> is a straightforward fact about <span class="inlinecode"><span class="id" title="var">Forall</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> turning an <span class="inlinecode"><span class="id" title="var">app</span></span> of lists into a conjunction

</li>
<li> <span class="inlinecode"><span class="id" title="var">pick_hyp_prepend</span></span> relates <span class="inlinecode"><span class="id" title="var">pick_hyp_aux</span></span> <span class="inlinecode">(φ::<span class="id" title="var">l</span>)</span> <span class="inlinecode"><span class="id" title="var">l'</span></span> to <span class="inlinecode"><span class="id" title="var">pick_hyp_aux</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode"><span class="id" title="var">l'</span></span> (crux of the induction in <span class="inlinecode"><span class="id" title="var">size_decreasing</span></span>)

</li>
<li> <span class="inlinecode"><span class="id" title="var">Forall_concat_prepend</span></span> is an intuitive yet technical lemma used to tackle the elimination rules in <span class="inlinecode"><span class="id" title="var">size_decreasing</span></span>

</li>
</ul>

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fact</span> <a name="Forall_app"><span class="id" title="lemma">Forall_app</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> (<span class="id" title="var">P</span>:<a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <span class="id" title="var">l</span> <span class="id" title="var">l'</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="project_Kaddar.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="project_Kaddar.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="project_Kaddar.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">aut</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">aut</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> × |- *; <span class="id" title="tactic">intros</span>; <span class="id" title="var">int</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="prepend"><span class="id" title="definition">prepend</span></a> {<span class="id" title="var">A</span>: <span class="id" title="keyword">Type</span>} (<span class="id" title="var">a</span>: <a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a>) '<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">l</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> : <a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="project_Kaddar.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="pick_hyp_prepend"><span class="id" title="lemma">pick_hyp_prepend</span></a> : <span class="id" title="keyword">∀</span> φ <span class="id" title="var">l</span> <span class="id" title="var">l'</span>, <a class="idref" href="project_Kaddar.html#pick_hyp_aux"><span class="id" title="definition">pick_hyp_aux</span></a> (<a class="idref" href="project_Kaddar.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="project_Kaddar.html#prepend"><span class="id" title="definition">prepend</span></a> <a class="idref" href="project_Kaddar.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a>) (<a class="idref" href="project_Kaddar.html#pick_hyp_aux"><span class="id" title="definition">pick_hyp_aux</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">revert</span> φ <span class="id" title="var">l</span>; <span class="id" title="var">sint</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">l'</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">constructors_Forall</span> := <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_nil"><span class="id" title="constructor">Forall_nil</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_cons"><span class="id" title="constructor">Forall_cons</span></a>; <span class="id" title="tactic">simpl</span>).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">sum_map_app</span> := <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> + <span class="id" title="tactic">rewrite</span> <a class="idref" href="project_Kaddar.html#sum_app"><span class="id" title="lemma">sum_app</span></a>).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">Forall_sum_map</span> := <span class="id" title="var">constructors_Forall</span>; <span class="id" title="var">saut</span> <span class="id" title="var">sum_map_app</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">concat_Forall_app</span> := <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#concat_app"><span class="id" title="lemma">concat_app</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="project_Kaddar.html#Forall_app"><span class="id" title="lemma">Forall_app</span></a>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "concat_Forall_app" "in" <span class="id" title="var">hyp</span>(<span class="id" title="var">H</span>) := <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#concat_app"><span class="id" title="lemma">concat_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> &lt;- <a class="idref" href="project_Kaddar.html#Forall_app"><span class="id" title="lemma">Forall_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="Forall_concat_prepend"><span class="id" title="lemma">Forall_concat_prepend</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">C</span> <span class="id" title="var">n</span> φ, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s'</span> : <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a> ⇒ <a class="idref" href="project_Kaddar.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="project_Kaddar.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="project_Kaddar.html#n"><span class="id" title="variable">n</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#concat"><span class="id" title="definition">concat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#concat"><span class="id" title="definition">concat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="project_Kaddar.html#apply_elim_rules"><span class="id" title="definition">apply_elim_rules</span></a> <a class="idref" href="project_Kaddar.html#C"><span class="id" title="variable">C</span></a>) <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s'</span> : <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a> ⇒ <a class="idref" href="project_Kaddar.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="project_Kaddar.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="project_Kaddar.html#size_form"><span class="id" title="definition">size_form</span></a> <a class="idref" href="project_Kaddar.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="project_Kaddar.html#n"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#concat"><span class="id" title="definition">concat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#concat"><span class="id" title="definition">concat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">Γ</span> ⇒ (<a class="idref" href="project_Kaddar.html#apply_elim_rules"><span class="id" title="definition">apply_elim_rules</span></a> <a class="idref" href="project_Kaddar.html#C"><span class="id" title="variable">C</span></a>) (<a class="idref" href="project_Kaddar.html#prepend"><span class="id" title="definition">prepend</span></a> <a class="idref" href="project_Kaddar.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a> <a class="idref" href="project_Kaddar.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>)) <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">revert</span> φ; <span class="id" title="var">sint</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">concat_Forall_app</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="var">s_all</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> (ψ, <span class="id" title="var">Δ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">concat_Forall_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ψ; <span class="id" title="var">Forall_sum_map</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="project_Kaddar.html#size"><span class="id" title="definition">size</span></a> <span class="id" title="tactic">in</span> × |-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">saut_all</span> (<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> × |- + <span class="id" title="tactic">rewrite</span> <a class="idref" href="project_Kaddar.html#sum_app"><span class="id" title="lemma">sum_app</span></a> <span class="id" title="tactic">in</span> × |-)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="var">s_all</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>. <span class="id" title="var">concat_Forall_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> ?].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
which leads to: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="size_decreasing"><span class="id" title="lemma">size_decreasing</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s'</span> ⇒ <a class="idref" href="project_Kaddar.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="project_Kaddar.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="project_Kaddar.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#concat"><span class="id" title="definition">concat</span></a> (<a class="idref" href="project_Kaddar.html#step"><span class="id" title="definition">step</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="project_Kaddar.html#step"><span class="id" title="definition">step</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">concat_Forall_app</span>; <span class="id" title="var">saut</span> <span class="id" title="tactic">split</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-3: <span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="var">Forall_sum_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="project_Kaddar.html#pick_hyp_prepend"><span class="id" title="lemma">pick_hyp_prepend</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map_map"><span class="id" title="lemma">map_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">concat_Forall_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Arith.Plus.html#plus_assoc"><span class="id" title="abbreviation">plus_assoc</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="project_Kaddar.html#Forall_concat_prepend"><span class="id" title="lemma">Forall_concat_prepend</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab24"></a><h1 class="section">3.3 Soundness</h1>

<div class="paragraph"> </div>

<a name="lab25"></a><h2 class="section">1. Define the semantics of the formulae <span class="inlinecode"><span class="id" title="var">sem</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">form</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>, and the validity of sequents and subgoals.</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="sem_val"><span class="id" title="definition">sem_val</span></a> (<span class="id" title="var">valuation</span>: <a class="idref" href="project_Kaddar.html#Var"><span class="id" title="definition">Var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (φ: <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>) : <span class="id" title="keyword">Prop</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="project_Kaddar.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="project_Kaddar.html#bea38521e04ba10a34529a2ec1d696bc"><span class="id" title="notation">⊤</span></a>         ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="project_Kaddar.html#bb4d87379c428696b2d63c8c5979a5b1"><span class="id" title="notation">⊥</span></a>         ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="project_Kaddar.html#6d227b35fcc3fe7899272727b8c73bfc"><span class="id" title="notation">#</span></a> <span class="id" title="var">x</span>       ⇒ <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">∧</span></a> <span class="id" title="var">B</span>     ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#0def38e9465373df12920f2655265a68"><span class="id" title="notation">∨</span></a> <span class="id" title="var">B</span>     ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">A</span> <a class="idref" href="project_Kaddar.html#9f5c3375f7d09e0ae3bd999b8cf6897e"><span class="id" title="notation">→</span></a> <span class="id" title="var">B</span>     ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="sem"><span class="id" title="definition">sem</span></a> (φ: <a class="idref" href="project_Kaddar.html#form"><span class="id" title="inductive">form</span></a>) : <span class="id" title="keyword">Prop</span> := <span class="id" title="keyword">∀</span> <span class="id" title="var">valuation</span>, <a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a> <a class="idref" href="project_Kaddar.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="aa118cc61a5c18dd541f6f9501bfa28b"><span class="id" title="notation">&quot;</span></a>⟦ φ ⟧_ v" := (<a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <span class="id" title="var">v</span> φ) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 55).<br/>
<span class="id" title="keyword">Notation</span> <a name="e30f1fc6aff009f2034a1be3c2c0749d"><span class="id" title="notation">&quot;</span></a>⟦ φ ⟧" := (<a class="idref" href="project_Kaddar.html#sem"><span class="id" title="definition">sem</span></a> φ) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 55).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="is_valid_seq"><span class="id" title="definition">is_valid_seq</span></a> '(<span class="id" title="var">Δ</span> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">A</span>) := <span class="id" title="keyword">∀</span> <span class="id" title="var">valuation</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a>) <a class="idref" href="project_Kaddar.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a> <a class="idref" href="project_Kaddar.html#valuation"><span class="id" title="variable">valuation</span></a> <a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="is_valid_subgoal"><span class="id" title="definition">is_valid_subgoal</span></a> : <a class="idref" href="project_Kaddar.html#subgoals"><span class="id" title="definition">subgoals</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">Exists</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="project_Kaddar.html#is_valid_seq"><span class="id" title="definition">is_valid_seq</span></a>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Examples_sem"><span class="id" title="section">Examples_sem</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="val"><span class="id" title="definition">val</span></a> (<span class="id" title="var">x'</span>: <a class="idref" href="project_Kaddar.html#Var"><span class="id" title="definition">Var</span></a>) : <span class="id" title="keyword">Prop</span> := <span class="id" title="keyword">match</span> <a class="idref" href="project_Kaddar.html#x'"><span class="id" title="variable">x'</span></a> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1 | 2 | 4 ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="ex_sem_1"><span class="id" title="definition">ex_sem_1</span></a> : <a class="idref" href="project_Kaddar.html#aa118cc61a5c18dd541f6f9501bfa28b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="project_Kaddar.html#6d227b35fcc3fe7899272727b8c73bfc"><span class="id" title="notation">#</span></a> 1 <a class="idref" href="project_Kaddar.html#efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#6d227b35fcc3fe7899272727b8c73bfc"><span class="id" title="notation">#</span></a> 4 <a class="idref" href="project_Kaddar.html#aa118cc61a5c18dd541f6f9501bfa28b"><span class="id" title="notation">⟧</span></a><a class="idref" href="project_Kaddar.html#aa118cc61a5c18dd541f6f9501bfa28b"><span class="id" title="notation">_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">simpl</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Example</span> <a name="ex_sem_2"><span class="id" title="definition">ex_sem_2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="project_Kaddar.html#e30f1fc6aff009f2034a1be3c2c0749d"><span class="id" title="notation">⟦</span></a> <a class="idref" href="project_Kaddar.html#6d227b35fcc3fe7899272727b8c73bfc"><span class="id" title="notation">#</span></a> 1 <a class="idref" href="project_Kaddar.html#0def38e9465373df12920f2655265a68"><span class="id" title="notation">∨</span></a> <a class="idref" href="project_Kaddar.html#6d227b35fcc3fe7899272727b8c73bfc"><span class="id" title="notation">#</span></a> 2 <a class="idref" href="project_Kaddar.html#e30f1fc6aff009f2034a1be3c2c0749d"><span class="id" title="notation">⟧</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="project_Kaddar.html#sem"><span class="id" title="definition">sem</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">saut_all</span> (<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>))). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="project_Kaddar.html#Examples_sem"><span class="id" title="section">Examples_sem</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab26"></a><h2 class="section">2. Prove the soundness of the leaf case: if <span class="inlinecode"><span class="id" title="var">is_leaf</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> returns <span class="inlinecode"><span class="id" title="var">true</span></span>, then <span class="inlinecode"><span class="id" title="var">s</span></span> is valid.</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="soundness_leaf"><span class="id" title="lemma">soundness_leaf</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span>, <a class="idref" href="project_Kaddar.html#is_leaf"><span class="id" title="definition">is_leaf</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#is_valid_seq"><span class="id" title="definition">is_valid_seq</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="project_Kaddar.html#is_leaf"><span class="id" title="definition">is_leaf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sint_all</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="project_Kaddar.html#form_eq_dec"><span class="id" title="lemma">form_eq_dec</span></a> <span class="id" title="var">f</span> <a class="idref" href="project_Kaddar.html#bea38521e04ba10a34529a2ec1d696bc"><span class="id" title="notation">⊤</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">int</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="project_Kaddar.html#form_in_dec"><span class="id" title="definition">form_in_dec</span></a> <a class="idref" href="project_Kaddar.html#bb4d87379c428696b2d63c8c5979a5b1"><span class="id" title="notation">⊥</span></a> <span class="id" title="var">l</span>); <span class="id" title="tactic">unfold</span> <a class="idref" href="project_Kaddar.html#sem_val"><span class="id" title="definition">sem_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#bb4d87379c428696b2d63c8c5979a5b1"><span class="id" title="notation">⊥</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <a class="idref" href="project_Kaddar.html#bb4d87379c428696b2d63c8c5979a5b1"><span class="id" title="notation">⊥</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="var">int</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> : <span class="id" title="keyword">context</span>[ <a class="idref" href="project_Kaddar.html#form_in_dec"><span class="id" title="definition">form_in_dec</span></a> ?<span class="id" title="var">f</span> <span class="id" title="var">_</span> ] |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">destruct</span> (<a class="idref" href="project_Kaddar.html#form_in_dec"><span class="id" title="definition">form_in_dec</span></a> <span class="id" title="var">f</span> <span class="id" title="var">l</span>); <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">f</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="var">int</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab27"></a><h2 class="section">3. Prove the soundness of the step case: if <span class="inlinecode"><span class="id" title="var">step</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> is a valid list of subgoals, then <span class="inlinecode"><span class="id" title="var">s</span></span> is valid.</h2>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" title="var">soundness_step</span></span> is probably the trickiest part of the problem statement. It relies on 
    three new lemmas:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">Exists_app</span></span> is the analogue of <span class="inlinecode"><span class="id" title="var">Forall</span></span> for <span class="inlinecode"><span class="id" title="var">Exists</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">in_cons_app</span></span> is an ad hoc but really straightforward fact about the <span class="inlinecode"><span class="id" title="var">In</span></span> predicate

</li>
<li> <span class="inlinecode"><span class="id" title="var">In_pick_hyp</span></span> is the key lemma to deal with elimination rules in <span class="inlinecode"><span class="id" title="var">soundness_step</span></span>: it specifies  
   what is the form of the elements of <span class="inlinecode"><span class="id" title="var">pick_hyp</span></span> <span class="inlinecode">(<span class="id" title="var">l</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">f</span>)</span> 

</li>
</ul>

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fact</span> <a name="Exists_app"><span class="id" title="lemma">Exists_app</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> (<span class="id" title="var">P</span>:<a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <span class="id" title="var">l</span> <span class="id" title="var">l'</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">Exists</span></a> <a class="idref" href="project_Kaddar.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">Exists</span></a> <a class="idref" href="project_Kaddar.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">Exists</span></a> <a class="idref" href="project_Kaddar.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">aut</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists_nil"><span class="id" title="lemma">Exists_nil</span></a> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">aut</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists_cons_tl"><span class="id" title="constructor">Exists_cons_tl</span></a>; <span class="id" title="var">aut</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a> <span class="id" title="tactic">in</span> × |- *; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#in_app_or"><span class="id" title="lemma">in_app_or</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">eauto</span> | <span class="id" title="tactic">right</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a>; <span class="id" title="tactic">eauto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a name="in_cons_app"><span class="id" title="lemma">in_cons_app</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">A</span>: <span class="id" title="keyword">Type</span>) (<span class="id" title="var">a</span> <span class="id" title="var">b</span>:<a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">l</span> <span class="id" title="var">l'</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="project_Kaddar.html#A"><span class="id" title="variable">A</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#b"><span class="id" title="variable">b</span></a> (<a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#b"><span class="id" title="variable">b</span></a> (<a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="project_Kaddar.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="project_Kaddar.html#l'"><span class="id" title="variable">l'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; [<span class="id" title="var">now</span> <span class="id" title="tactic">left</span> | <span class="id" title="tactic">right</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#in_cons"><span class="id" title="lemma">in_cons</span></a>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">in_cons_app</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="In_pick_hyp"><span class="id" title="lemma">In_pick_hyp</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="project_Kaddar.html#pick_hyp"><span class="id" title="definition">pick_hyp</span></a> (<a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="project_Kaddar.html#975a09a6cb64b2f24be0a36a2b11a25f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="project_Kaddar.html#f"><span class="id" title="variable">f</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">h</span> <span class="id" title="var">l_1</span> <span class="id" title="var">l_2</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="project_Kaddar.html#h"><span class="id" title="variable">h</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="project_Kaddar.html#l_1"><span class="id" title="variable">l_1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="project_Kaddar.html#l_2"><span class="id" title="variable">l_2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="project_Kaddar.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="project_Kaddar.html#l_1"><span class="id" title="variable">l_1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="project_Kaddar.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="project_Kaddar.html#l_2"><span class="id" title="variable">l_2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sint_all</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>, <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">rewrite</span> <a class="idref" href="project_Kaddar.html#pick_hyp_prepend"><span class="id" title="lemma">pick_hyp_prepend</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="project_Kaddar.html#prepend"><span class="id" title="definition">prepend</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x1</span> <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 4 <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sint</span> (<span class="id" title="tactic">∃</span> <span class="id" title="var">f0</span>, (<span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">x3</span>), <span class="id" title="var">x4</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">aut</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">aut</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
now comes <span class="inlinecode"><span class="id" title="var">soundness_step</span></span> (again, we make use of a few tactic notations, 
to avoid repetitions): 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Tactic Notation</span> "exfalso_Exists" "in" <span class="id" title="var">hyp</span>(<span class="id" title="var">H</span>) := <span class="id" title="var">exfalso</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists_nil"><span class="id" title="lemma">Exists_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "cons_destruct_inv" "in" <span class="id" title="var">hyp</span>(<span class="id" title="var">H</span>) := <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists_cons"><span class="id" title="lemma">Exists_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "Forall_in_app_or" <span class="id" title="var">hyp</span>(<span class="id" title="var">H0</span>) := <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>; <span class="id" title="tactic">intros</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#in_app_or"><span class="id" title="lemma">in_app_or</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">int</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> ?<span class="id" title="var">X</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span> ⇒ <span class="id" title="var">int</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">X</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="soundness_step"><span class="id" title="lemma">soundness_step</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span>, <a class="idref" href="project_Kaddar.html#is_valid_subgoal"><span class="id" title="definition">is_valid_subgoal</span></a> (<a class="idref" href="project_Kaddar.html#step"><span class="id" title="definition">step</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#is_valid_seq"><span class="id" title="definition">is_valid_seq</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="project_Kaddar.html#is_valid_subgoal"><span class="id" title="definition">is_valid_subgoal</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="project_Kaddar.html#is_valid_seq"><span class="id" title="definition">is_valid_seq</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="project_Kaddar.html#step"><span class="id" title="definition">step</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="project_Kaddar.html#Exists_app"><span class="id" title="lemma">Exists_app</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">intros</span>; <span class="id" title="var">sint</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-2: <span class="id" title="var">exfalso_Exists</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-2: <span class="id" title="var">cons_destruct_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">int</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">int</span> <span class="id" title="var">cons_destruct_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-2: <span class="id" title="var">int</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cons_destruct_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H4</span> <span class="id" title="var">valuation</span>); <span class="id" title="var">aut</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="project_Kaddar.html#Forall_app"><span class="id" title="lemma">Forall_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#flat_map_concat_map"><span class="id" title="lemma">flat_map_concat_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#in_flat_map"><span class="id" title="lemma">in_flat_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="project_Kaddar.html#In_pick_hyp"><span class="id" title="lemma">In_pick_hyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">do</span> 4 <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="var">sint_all</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">x2</span> <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>) ] |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [ <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ] |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqf0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hx2</span>; <span class="id" title="var">int</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">x2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hx2</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqf0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx2</span>; <span class="id" title="var">int</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:    <span class="id" title="var">swap</span> 3 4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-3:    <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4:      <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:    <span class="id" title="var">Forall_in_app_or</span> <span class="id" title="var">H0</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">int</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">try</span> (<span class="id" title="var">int</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H6</span>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">int</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hx2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="var">Forall_in_app_or</span> <span class="id" title="var">H0</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">int</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">x6</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab28"></a><h2 class="section">4. Prove the soundness of <span class="inlinecode"><span class="id" title="tactic">tauto</span></span>.</h2>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" title="var">soundness_tauto</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> is proved by induction on <span class="inlinecode"><span class="id" title="var">n</span></span>, 

<div class="paragraph"> </div>

<ul class="doclist">
<li> the base case of which uses <span class="inlinecode"><span class="id" title="var">soundness_leaf</span></span>

</li>
<li> the inductive case of which relies on <span class="inlinecode"><span class="id" title="var">soundness_step</span></span> 
    (and the lemmas of the standard library characterizing 
    <span class="inlinecode"><span class="id" title="var">forallb</span></span>, <span class="inlinecode"><span class="id" title="var">existsb</span></span>, <span class="inlinecode"><span class="id" title="var">Forall</span></span> and <span class="inlinecode"><span class="id" title="var">Exists</span></span>)

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="soundness_tauto"><span class="id" title="lemma">soundness_tauto</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">s</span>, <a class="idref" href="project_Kaddar.html#tauto"><span class="id" title="definition">tauto</span></a> <a class="idref" href="project_Kaddar.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#is_valid_seq"><span class="id" title="definition">is_valid_seq</span></a> <a class="idref" href="project_Kaddar.html#s"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">int</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">sint_all</span> <span class="id" title="var">case_eq</span> (<a class="idref" href="project_Kaddar.html#is_leaf"><span class="id" title="definition">is_leaf</span></a> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="project_Kaddar.html#soundness_leaf"><span class="id" title="lemma">soundness_leaf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#existsb_exists"><span class="id" title="lemma">existsb_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#forallb_forall"><span class="id" title="lemma">forallb_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">int</span> <span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <a class="idref" href="project_Kaddar.html#seq"><span class="id" title="inductive">seq</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="project_Kaddar.html#is_valid_seq"><span class="id" title="definition">is_valid_seq</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_in_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="project_Kaddar.html#step"><span class="id" title="definition">step</span></a> <span class="id" title="var">s</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="project_Kaddar.html#is_valid_seq"><span class="id" title="definition">is_valid_seq</span></a> <a class="idref" href="project_Kaddar.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_exists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#Exists_exists"><span class="id" title="lemma">Exists_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_exists</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="project_Kaddar.html#soundness_step"><span class="id" title="lemma">soundness_step</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>